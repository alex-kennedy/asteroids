(this["webpackJsonpsolar-system"]=this["webpackJsonpsolar-system"]||[]).push([[0],{31:function(e){e.exports=JSON.parse('{"earth":{"a":[1.00000261,0.00000562],"e":[0.01671123,-0.00004392],"I":[-0.00001531,-0.01294668],"L":[100.46457166,35999.37244981],"long_peri":[102.93768193,0.32327364],"long_node":[0,0]},"jupiter":{"a":[5.202887,-0.00011607],"e":[0.04838624,-0.00013253],"I":[1.30439695,-0.00183714],"L":[34.39644051,3034.74612775],"long_peri":[14.72847983,0.21252668],"long_node":[100.47390909,0.20469106]},"mars":{"a":[1.52371034,0.00001847],"e":[0.0933941,0.00007882],"I":[1.84969142,-0.00813131],"L":[-4.55343205,19140.30268499],"long_peri":[-23.94362959,0.44441088],"long_node":[49.55953891,-0.29257343]},"mercury":{"a":[0.38709927,3.7e-7],"e":[0.20563593,0.00001906],"I":[7.00497902,-0.00594749],"L":[252.2503235,149472.67411175],"long_peri":[77.45779628,0.16047689],"long_node":[48.33076593,-0.12534081]},"neptune":{"a":[30.06992276,0.00026291],"e":[0.00859048,0.00005105],"I":[1.77004347,0.00035372],"L":[-55.12002969,218.45945325],"long_peri":[44.96476227,-0.32241464],"long_node":[131.78422574,-0.00508664]},"pluto":{"a":[39.48211675,-0.00031596],"e":[0.2488273,0.0000517],"I":[17.14001206,0.00004818],"L":[238.92903833,145.20780515],"long_peri":[224.06891629,-0.04062942],"long_node":[110.30393684,-0.01183482]},"saturn":{"a":[9.53667594,-0.0012506],"e":[0.05386179,-0.00050991],"I":[2.48599187,0.00193609],"L":[49.95424423,1222.49362201],"long_peri":[92.59887831,-0.41897216],"long_node":[113.66242448,-0.28867794]},"uranus":{"a":[19.18916464,-0.00196176],"e":[0.04725744,-0.00004397],"I":[0.77263783,-0.00242939],"L":[313.23810451,428.48202785],"long_peri":[170.9542763,0.40805281],"long_node":[74.01692503,0.04240589]},"venus":{"a":[0.72333566,0.0000039],"e":[0.00677672,-0.00004107],"I":[3.39467605,-0.0007889],"L":[181.9790995,58517.81538729],"long_peri":[131.60246718,0.00268329],"long_node":[76.67984255,-0.27769418]}}')},33:function(e){e.exports=JSON.parse('{"colours":{"trojan":"#c8d1ea","q_bound":"#bde3e9","hungaria":"#bef1e8","neo":"#d3fbe5","hilda":"#ffc8b7","belt":"#A8414B"},"opacity":{"trojan":1,"q_bound":1,"hungaria":1,"neo":0.35,"hilda":1,"belt":0.5}}')},34:function(e){e.exports=JSON.parse('{"mercury":"#E9ECF3","venus":"#D8A63D","earth":"#67D864","mars":"#F34C4C","saturn":"#C2A664","jupiter":"#B97840","uranus":"#C4E2E2","neptune":"#4C90ED","pluto":"#CBC1B1","sun":"#F9D66A"}')},37:function(e,t,n){},45:function(e,t,n){e.exports=n.p+"static/media/star.85baf2a7.svg"},46:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c}));var r=n(35),i=n.n(r),a=n(47),o=n(48),s=n.n(o);function c(e){return u.apply(this,arguments)}function u(){return(u=Object(a.a)(i.a.mark((function t(n){var r,a,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(n);case 2:return r=t.sent,t.next=5,r.arrayBuffer();case 5:return a=t.sent,o=s()(e(a)),t.abrupt("return",JSON.parse(new TextDecoder("utf-8").decode(o)));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}).call(this,n(61).Buffer)},56:function(e,t,n){e.exports=n(77)},77:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(11),o=n.n(a),s=(n(37),n(9)),c=n(17),u=n(13),l=n(12),h=n(50),d=n(10),p=n(2),v=n(43),f=n(32),m=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i,a,o,c,u){var l;return Object(s.a)(this,n),(l=t.call(this)).type="OrbitCurve",l.focus=e,l.a=r,l.e=i,l.I=a,l.L=o,l.long_peri=c,l.long_node=u,l.arg_peri=l.long_peri-l.long_node,l}return Object(c.a)(n,[{key:"getPoint",value:function(e,t){var n=t||new p.Vector3,r=360*e,i=Math.PI/180,a=this.a*(Math.cos(i*r)-this.e),o=this.a*Math.sqrt(1-Math.pow(this.e,2))*Math.sin(i*r),s=Math.cos(i*this.arg_peri),c=Math.cos(i*this.long_node),u=Math.cos(i*this.I),l=Math.sin(i*this.arg_peri),h=Math.sin(i*this.long_node),d=Math.sin(i*this.I),v=(s*c-l*h*u)*a+(-l*c-s*h*u)*o,f=(s*h+l*c*u)*a+(-l*h+s*c*u)*o,m=l*d*a+s*d*o;return n.set(v,f,m)}}]),n}(p.Curve),g=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e,r,i){var a;for(var o in Object(s.a)(this,n),(a=t.call(this,e)).color=i,a.time_centuries=a.getCenturiesTT(),r)r.hasOwnProperty(o)&&(a[o]=r[o][0]+a.time_centuries*r[o][1]);return a.arg_peri=a.long_peri-a.long_node,a.M=(a.L-a.long_peri+180)%360-180,a}return Object(c.a)(n,[{key:"solveKepler",value:function(e){e=e||1e-6;for(var t=180/Math.PI*this.e,n=this.M+t*Math.sin(Math.PI/180*this.M),r=360;Math.abs(r)>e;)n+=r=(this.M-(n-t*Math.sin(Math.PI/180*n)))/(1-this.e*Math.cos(Math.PI/180*n)),1;return n}},{key:"getCenturiesTT",value:function(){return(this.getNowTT()/86400-10957.5)/36525}},{key:"getNowTT",value:function(){return Date.now()/1e3+69.184}},{key:"initialiseOrbit",value:function(){this.curve=new m(this.focus,this.a,this.e,this.I,this.L,this.long_peri,this.long_node),this.E=this.solveKepler(),this.currentPosition=this.curve.getPoint(this.E/360)}},{key:"showInScene",value:function(e,t){var n=this.curve.getPoints(100),r=(new p.BufferGeometry).setFromPoints(n);r=r.getAttribute("position").array;var i=new f.MeshLine;i.setGeometry(r);var a=new f.MeshLineMaterial({useMap:!1,color:this.color,opacity:1,resolution:new p.Vector2(window.innerWidth,window.innerHeight),sizeAttenuation:!1,lineWidth:5}),o=new p.Mesh(i.geometry,a);e.add(o)}}]),n}((function e(t,n,r,i,a,o,c,u){Object(s.a)(this,e),this.name=t||"",this.focus=n||new p.Vector3(0,0,0),this.a=r,this.e=i,this.I=a,this.L=o,this.long_peri=c,this.long_node=u})),b=n(44),w=n(33),y=n(34),M=n(31),_=n(45),A=n.n(_),j=n(46),O=function(){return new Worker(n.p+"static/js/asteroids.worker.31be8726.worker.js")},k=n(102),S=n(101),P=n(100);function C(e){return i.a.createElement(S.a,Object.assign({elevation:6,variant:"filled"},e))}var B=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(k.a,{open:this.props.open,anchorOrigin:{horizontal:"left",vertical:"bottom"}},i.a.createElement(C,{severity:"info",icon:i.a.createElement(P.a,{color:"inherit",size:20})},"Loading Asteroids...")))}}]),n}(i.a.Component),I=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={loadingAsteroids:!0},r.start=r.start.bind(Object(d.a)(r)),r.stop=r.stop.bind(Object(d.a)(r)),r.animate=r.animate.bind(Object(d.a)(r)),r.updateDimensions=r.updateDimensions.bind(Object(d.a)(r)),r.renderBrightStars=r.renderBrightStars.bind(Object(d.a)(r)),r.renderAsteroids=r.renderAsteroids.bind(Object(d.a)(r)),r.updateAsteroids=r.updateAsteroids.bind(Object(d.a)(r)),r.handleAsteroidWorkerMessage=r.handleAsteroidWorkerMessage.bind(Object(d.a)(r)),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.createScene(),window.addEventListener("resize",this.updateDimensions),this.loadBrightStars(),this.addControls(),this.addStats(),this.addPlanets(),this.addSun(),this.asteroidsWorker=new O,this.asteroidsWorker.onmessage=this.handleAsteroidWorkerMessage,this.asteroidsWorker.postMessage({cmd:"init"}),window.scene=this}},{key:"createScene",value:function(){var e=this.mount.clientWidth,t=this.mount.clientHeight,n=e/t,r=new p.WebGLRenderer,i=new p.PerspectiveCamera(45,n,.001,1e5),a=new p.Scene;a.add(i),r.setSize(e,t),r.setPixelRatio(window.devicePixelRatio),this.renderer=r,this.camera=i,this.scene=a,this.mount.appendChild(this.renderer.domElement),this.start()}},{key:"addControls",value:function(){var e=new v.a(this.camera,this.renderer.domElement);this.camera.position.set(0,0,20),e.enableDamping=!0,e.dampingFactor=.15,e.rotateSpeed=.5,e.maxDistance=100,e.enablePan=!1,this.controls=e}},{key:"addStats",value:function(){var e=new b.a;e.setMode(0),this.stats=e}},{key:"addCelestialSphereWireframe",value:function(){var e=new p.SphereGeometry(100,100,100),t=new p.MeshBasicMaterial({color:11184810,wireframe:!0});t.side=p.DoubleSide;var n=new p.Mesh(e,t);this.scene.add(n)}},{key:"loadBrightStars",value:function(){Object(j.a)("/solar-system/assets/bright_stars.json.br").then(this.renderBrightStars)}},{key:"renderBrightStars",value:function(e){for(var t=new Float32Array(e.length),n=new Float32Array(3*e.length),r=new Float32Array(3*e.length),i=new p.Color(1,1,1),a=0;a<e.length;a++)n[3*a]=e[a][1],n[3*a+1]=e[a][2],n[3*a+2]=e[a][3],t[a]=e[a][0]/2,i.toArray(r,3*a);var o=new p.BufferGeometry;o.setAttribute("position",new p.BufferAttribute(n,3)),o.setAttribute("size",new p.BufferAttribute(t,1)),o.setAttribute("color_shader",new p.BufferAttribute(r,3));var s=(new p.TextureLoader).load(A.a),c=new p.ShaderMaterial({uniforms:{color:{value:new p.Color(16777215)},texture:{value:s}},vertexShader:"\n  attribute float size;\n  attribute vec3 color_shader;\n\n  varying vec3 vColor;\n\n  void main() {\n\n    vColor = color_shader;\n\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n    gl_PointSize = size * ( 300.0 / -mvPosition.z );\n\n    gl_Position = projectionMatrix * mvPosition;\n\n  }\n",fragmentShader:"\n  uniform vec3 color;\n  uniform sampler2D texture;\n\n  varying vec3 vColor;\n\n  void main() {\n\n    vec4 color = vec4( color * vColor, 1.0 ) * texture2D( texture, gl_PointCoord );\n\n    gl_FragColor = color;\n\n  }\n",transparent:!0}),u=new p.Points(o,c);this.scene.add(u)}},{key:"addSun",value:function(){var e=new p.SphereBufferGeometry(1,16,16),t=new p.MeshBasicMaterial({color:new p.Color("#F9D670")}),n=new p.Mesh(e,t);this.scene.add(n),this.sun=n}},{key:"addPlanets",value:function(){var e=[];for(var t in M)if(M.hasOwnProperty(t)){var n=new g(t,M[t],y[t]);n.initialiseOrbit(),e.push(n)}for(var r=0;r<e.length;r++){e[r].showInScene(this.scene,this.camera);var i=new p.SphereBufferGeometry(1,16,16),a=new p.MeshBasicMaterial({color:y[e[r].name]}),o=new p.Mesh(i,a),s=e[r].currentPosition;o.position.set(s.x,s.y,s.z),e[r].mesh=o,this.scene.add(o)}this.planets=e}},{key:"handleAsteroidWorkerMessage",value:function(e){"initComplete"===e.data.cmd?this.renderAsteroids(e.data.locations):this.updateAsteroids(e.data.locations)}},{key:"renderAsteroids",value:function(e){this.asteroidPoints={};for(var t=0,n=Object.entries(e);t<n.length;t++){var r=Object(h.a)(n[t],2),i=r[0],a=r[1],o=new p.BufferGeometry;o.setAttribute("position",new p.BufferAttribute(a,3));for(var s=o.attributes.position.count,c=w.opacity[i],u=new Float32Array(s),l=0;l<s;l++)u[l]=c;o.setAttribute("alpha",new p.BufferAttribute(u,1));var d=new p.ShaderMaterial({uniforms:{color:{value:new p.Color(w.colours[i])}},vertexShader:"\nattribute float alpha;\nvarying float vAlpha;\n\nvoid main() {\n  vAlpha = alpha;\n  vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n  gl_PointSize = 2.0;\n  gl_Position = projectionMatrix * mvPosition;\n}\n",fragmentShader:"\nuniform vec3 color;\nvarying float vAlpha;\n\nvoid main() {\n  gl_FragColor = vec4( color, vAlpha );\n}\n",transparent:!0,depthTest:!0}),v=new p.Points(o,d);this.scene.add(v),this.asteroidPoints[i]=v}this.setState({loadingAsteroids:!1})}},{key:"updateAsteroids",value:function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];this.asteroidPoints[r].geometry.setAttribute("position",new p.BufferAttribute(e[r],3))}}},{key:"requestAsteroidUpdate",value:function(e){this.asteroidsWorker.postMessage({cmd:"update",t:e})}},{key:"updateDimensions",value:function(){var e=this.mount.clientWidth,t=this.mount.clientHeight;this.renderer.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}},{key:"componentWillUnmount",value:function(){this.stop(),this.mount.removeChild(this.renderer.domElement)}},{key:"start",value:function(){this.frameId||(this.frameId=requestAnimationFrame(this.animate))}},{key:"stop",value:function(){cancelAnimationFrame(this.frameId)}},{key:"animate",value:function(){this.stats.begin();for(var e=new p.Vector3,t=0;t<this.planets.length;t++){var n=e.subVectors(this.planets[t].mesh.position,this.camera.position).length()/250;this.planets[t].mesh.scale.set(n,n,n)}var r=e.subVectors(this.sun.position,this.camera.position).length()/250;this.sun.scale.set(r,r,r),this.renderer.render(this.scene,this.camera),this.controls.update(),this.stats.end(),this.frameId=requestAnimationFrame(this.animate)}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{width:"100%",height:"100%"},ref:function(t){e.mount=t}}),i.a.createElement(B,{open:this.state.loadingAsteroids}))}}]),n}(r.Component),x=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{id:"container"},i.a.createElement(I,null)),i.a.createElement("div",{id:"interface"}))}}]),n}(i.a.Component);o.a.render(i.a.createElement(x,null),document.getElementById("wrapper"))}},[[56,1,2]]]);
//# sourceMappingURL=main.d74ccf59.chunk.js.map